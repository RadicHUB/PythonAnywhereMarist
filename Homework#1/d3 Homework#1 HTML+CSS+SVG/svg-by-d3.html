<!doctype html>
<!--
  Course: DATA 300L-111 Spring 2022
  Author: Miles Manuel-Scott
-->
<html lang="en">

<head>
  <title>The Most In-Demand Programming Languages for 2022</title>
  <meta charset="utf-8" />
  <link href="svg-by-d3.css" rel="stylesheet" />
  <script src="lib/d3.js"></script>
  <script>
    window.onload = () => {
      const dataSpring20 = [{
          "Language": "JavaScript",
          "Avg Language": 69.7
        },
        {
          "Language": "HTML",
          "Avg Language": 62.4
        },
        {
          "Language": "SQL",
          "Avg Language": 56.9
        },
        {
          "Language": "Python",
          "Avg Language": 41.6
        },
        {
          "Language": "Java",
          "Avg Language": 38.4
        }
      ];
      const languageAvg = 53.8;

      const barSpacing = 5;
      const strokeWidth = 2;
      const w = 1250;
      const h = 300;
      const barChart = d3.select("#bar-chart").append("svg").attr("width", w).attr("height", h);
      d3.select("#bar-chart").append("figcaption")
        .text("Percentage of Professional Developers that use the following programming languages displayed using a bar chart.");

      const bars = barChart
        .selectAll("g")
        .data(dataSpring20)
        .enter()
        .append("g");

      bars
        .append("rect")
        .attr("x", strokeWidth)
        .attr("y", (d, i) => i * h / dataSpring20.length + strokeWidth)
        .attr("width", d => d["Avg Language"] * 17)
        .attr("height", h / dataSpring20.length - barSpacing)
        .style("fill", d => {
          const overUnder = d["Avg Language"] - languageAvg;
          const saturation = Math.round(100 * 2 * overUnder / languageAvg);
          return "hsl(0," + saturation + "%,50%)";
        })
        .style("stroke-width", strokeWidth);

      bars
        .append("text")
        .text(d => d["Avg Language"])
        .attr("x", d => d["Avg Language"] * 17 + 2 * barSpacing)
        .attr("y", (d, i) => i * h / dataSpring20.length + (h / dataSpring20.length / 2 + barSpacing))
        .style("font-size", "12pt");

      bars
        .append("text")
        .text(d => d["Language"])
        .attr("x", 2 * barSpacing)
        .attr("y", (d, i) => i * h / dataSpring20.length + (h / dataSpring20.length / 2 + barSpacing))
        .style("fill", "white")
        .style("font-size", "12pt");

        const dataCMPT120 = [{
          "Semester": "JavaScript",
          "Avg Class Size": 69.7
        },
        {
          "Semester": "HTML",
          "Avg Class Size": 62.4
        },
        {
          "Semester": "SQL",
          "Avg Class Size": 56.9
        },
        {
          "Semester": "Python",
          "Avg Class Size": 41.6
        },
        {
          "Semester": "Java",
          "Avg Class Size": 38.4
        }
      ];

      const termToInt = d => {
        switch (d["Semester"]) {
          case "JavaScript":
            return 5;
          case "HTML":
            return 10;
          case "SQL":
            return 15;
          case "Python":
            return 20;
          case "Java":
            return 25;
        };
      }

      const line = d3.line()
        .x(termToInt)
        .y(function(d) {
          return 72 - d["Avg Class Size"];
        });

      const lineChart = d3.select("#line-chart")
        .append("svg")
        .attr("width", 800)
        .attr("viewBox", "0 0 38 37.5")
        .attr("preserveAspectRatio", "none");

      d3.select("#line-chart").append("figcaption")
        .text("Percentage of Professional Developers that use the following programming languages displayed using a line graph.");

      lineChart.append("path")
        .datum(dataCMPT120)
        .attr("class", "line")
        .attr("d", line);

      const labels = lineChart
        .selectAll("g")
        .data(dataCMPT120)
        .enter()
        .append("g");

      labels.append("text")
        .text(d => d["Semester"])
        .attr("x", d => termToInt(d))
        .attr("y", 37)
        .attr("text-anchor", "middle")
        .style("fill", "black")
        .style("font-size", "1px");

      labels.append("text")
        .text(d => d["Avg Class Size"])
        .attr("x", d => termToInt(d))
        .attr("y", d => 71 - d["Avg Class Size"])
        .attr("text-anchor", "middle")
        .style("fill", "black")
        .style("font-size", "1px");
    }
  </script>
</head>

<body>
  <h1>The Most In-Demand <abbr title="Scalable Vector Graphics">Programming Languages</abbr> for 2022</h1>
  <p>According to <a href="https://insights.stackoverflow.com/survey/2020#technology-programming-scripting-and-markup-languages-professional-developers">Stack Overflowâ€™s 2020 Developer Survey</a>, JavaScript currently stands as the most commonly-used language in the world</p>
  <section>
    <h2>Horizontal Bar Chart</h2>
    <figure id="bar-chart"></figure>
  </section>
  <section>
    <h2>Line Graph</h2>
    <figure id="line-chart"></figure>
  </section>
  <section>
    <h2>Scatter Plot</h2>
    <figure>
      <svg width="600" viewBox="0 0 29 13.5" preserveAspectRatio="none">
        <g>
          <text x="1" y="2.33" text-anchor="middle">80%</text>
          <text x="1" y="4.33" text-anchor="middle">60%</text>
          <text x="1" y="6.33" text-anchor="middle">40%</text>
          <text x="1" y="8.33" text-anchor="middle">20%</text>
          <text x="1" y="10.33" text-anchor="middle">0%</text>
          <rect x="2" y="10" width="0.5" height="0.05" />
          <rect x="2" y="8" width="0.5" height="0.05" />
          <rect x="2" y="6" width="0.5" height="0.05" />
          <rect x="2" y="4" width="0.5" height="0.05" />
          <rect x="2" y="2" width="0.5" height="0.05" />
        </g>
        <g>
          <rect x="2" y="10" width="30" height="0.05" />
          <text x="5" y="12" text-anchor="middle">JavaScript</text>
          <text x="10" y="12" text-anchor="middle">HTML</text>
          <text x="15" y="12" text-anchor="middle">SQL</text>
          <text x="20" y="12" text-anchor="middle">Python</text>
          <text x="25" y="12" text-anchor="middle">Java</text>
        </g>
        <!-- Since y-axis is inverted, use (10 - data) for the y-coordinate -->
        <g fill="#FFD700">
          <circle cx="5" cy="2.77" r="0.3" />

        </g>
        <g fill="#FF4500">

          <circle cx="10" cy="3.84" r="0.3" />

        </g>
        <g fill="#4169E1">

          <circle cx="15" cy="4.99" r="0.3" />

        </g>
        <g fill="#006400">

          <circle cx="20" cy="5.86" r="0.3" />

        </g>
        <g fill="#8B008B">

          <circle cx="25" cy="6.64" r="0.3" />
        </g>
      </svg>
      <svg width="100" viewBox="0 0 7 12" preserveAspectRatio="none">
        <text x="0" y="1" text-anchor="start">Legend</text>
        <g fill="#FFD700">
          <circle cx="1" cy="3" r="0.3" />
          <text x="2" y="3.33" text-anchor="start">JavaScript</text>
        </g>
        <g fill="#FF4500">
          <circle cx="1" cy="5" r="0.3" />
          <text x="2" y="5.33" text-anchor="start">HTML</text>
        </g>
        <g fill="#4169E1">
          <circle cx="1" cy="7" r="0.3" />
          <text x="2" y="7.33" text-anchor="start">SQL</text>
        </g>
        <g fill="#006400">
          <circle cx="1" cy="9" r="0.3" />
          <text x="2" y="9.33" text-anchor="start">Python</text>
        </g>
        <g fill="#8B008B">
          <circle cx="1" cy="11" r="0.3" />
          <text x="2" y="11.33" text-anchor="start">Java</text>
        </g>
      </svg>
      <figcaption>Percentage of Professional Developers that use the following programming languages displayed using a scatter plot.</figcaption>
    </figure>
  </section>
</body></html>
